{% extends 'base.html' %}
{% block css %}
<style>
    .table-container{
        position: relative;
        top:150px;
        color: white;
    justify-content: center;
    align-items: center;
    
    }
    .table{
        color: aliceblue;
        
    }
    .table-container h3{
      text-align: center;
      margin-top: 50px;
    }
    .table-container h4{
      text-align: center;
    
    }
    .table-container h5{
      text-align: center;
    
    }
    .table-container {
      position: relative;
      top: 100px;
      min-height: 300px;
      width: 100%;
      bottom: 100px;
      color: wheat;
      /* background-color: rgb(247, 246, 246); */
      padding: 50px;
  }

  #no-data {
      width: 80%;
      position: absolute;
      top: 150%;
      left: 50%;
      margin-right: -50%;
      margin-bottom: 20px;
      transform: translate(-50%, -50%);
      text-align: center;
      font-size: 25px;
      padding: 30px;
  }

  .table {
      width: 100%;
      color: #333;
      background-color: #fff;
      border-collapse: collapse;
  }

  .table thead th {
      background-color: #428bca;
      color: #fff;
      font-weight: bold;
  }

  .table tbody tr:nth-child(odd) {
      background-color: #f5f9fc;
  }

  .table tbody tr:hover {
      background-color: #d8e7f3;
  }

  .table td, .table th {
      padding: 0.5em;
      text-align: left;
      vertical-align: middle;
  }

  .input-group {
      margin-bottom: 10px;
  }

  .form-control {
      width: 300px;
      display: inline-block;
  }

  .btn {
      margin-left: 10px;
  }

</style>
{%endblock%}
{% block content %}
<div class="table-container">

    <h4>Welcome {{ user.first_name }}</h4>
    <h5>{{ user.get_role }}'s Dashboard</h5>

    {% if conferences %}
      <h3>Your created conferences:</h3>
      <table class="table">
        <thead>
          <tr>
              <th scope="col">#</th>
              <th scope="col">Name</th>
              <th scope="col">Acronym</th>
              <th scope="col">Research area</th>
              <th scope="col">Where</th>
              <th scope="col">Start date</th>
              <th scope="col">End date</th>
              <th scope="col">Submission Deadline</th>
              <th scope="col">Approval Status</th>
              <th scope="col">Action</th>    
          </tr>
        </thead>
        <tbody>
          {% for conference in conferences %}
            <tr>
              <th scope="row">{{ forloop.counter }}</th>
              <td>{{ conference.name }}</td>
              <td>{{ conference.acronym }}</td>
              <td>{{ conference.research_area }}</td>
              <td>{{ conference.venue }}, {{ conference.city }}, {{ conference.country }}</td>
              <td>{{ conference.start_date }}</td>
              <td>{{ conference.end_date }}</td>
              <td>{{ conference.submission_deadline }}</td>
              <td>
                {% if conference.is_approved %}
                  Approved
                {% elif not conference.is_approved %}
                  Not Approved  
                {% else %}
                  Not Decided 
                {% endif %}  
              </td>
              <td>
                <a href="#" style="color: unset;"><i class="fas fa-edit"></i></a> &nbsp; <a href="#" onclick="return confirm('Are you sure you want to delete this conference?')"><i class="fa fa-trash text-danger"></i></a>
              </td>
            </tr>
          {% endfor %}    
        </tbody>
      </table>
    {% endif %}
    {% if papers %}
      <h3>Your submitted papers:</h3>
      <table class="table">
        <thead>
          <tr>
              <th scope="col">#</th>
              <th scope="col">Title</th>
              <th scope="col">Abstract</th>
              <th scope="col">Authors</th>
              <th scope="col">Submitted In</th>
              <th scope="col">Action</th>    
          </tr>
        </thead>
        <tbody>
          {% for paper in papers %}
            <tr>
              <th scope="row">{{ forloop.counter }}</th>
              <td>{{ paper.title }}</td>
              <td>{{ paper.abstract }}</td>
              <td>
                {% for author in paper.authors.all %}
                  {{ author.first_name }} {{ author.last_name }}{% if not forloop.last %}, {% endif %}
                {% endfor %} 
              </td>   
              <td>
                  {{ paper.conference.name }}
              </td>
              <td>
                <a href="{% url 'edit_paper' paper.conference.id paper.id %}" style="color: unset;"><i class="fas fa-edit"></i></a> &nbsp; <a href="{% url 'withdraw_paper' paper.id %}" onclick="return confirm('Are you sure you want to delete this paper?')"><i class="fa fa-trash text-danger"></i></a>
              </td>
            </tr>
          {% endfor %}    
        </tbody>
      </table>
    {% endif %}
  </div>


{% endblock %}