{% extends 'conference/add_author.html' %}

{% block modal-id %} id="edit_author_modal" {% endblock modal-id %}

{% block modal-title %}<i class="fas fa-edit"></i>&nbsp;&nbsp; Edit Author</h5>{% endblock modal-title %}

{% block action %} action="{% url 'edit_author' conference_id paper.id author_id %}" {% endblock action %}

{% block btn-action %}<i class="fas fa-edit"></i>&nbsp;&nbsp;Save Changes{% endblock btn-action %}

{% block js %}
<script>
  $(document).ready(function() {
    $('#edit_author_modal').modal('show');
    $('#edit_author_modal').on('click', function(event) {
      if ($(event.target).is('#edit_author_modal')) {
        redirectToSubmitPaper();
      }
    });
  }); 
{% endblock js %}

<!-- Modal -->
{% comment %} <div class="modal fade" {% block modal-id %} id="edit_author_modal" {% endblock modal-id %} tabindex="-1" role="dialog" aria-labelledby="edit_author_modal_label" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="edit_author_modal_label">{% block modal-title %}<i class="fas fa-pencil"></i>&nbsp;&nbsp; Edit Author</h5>{% endblock modal-title %}
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="redirectToSubmitPaper()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        
        <form {% block action %} action="{% url 'edit_author' conference_id paper.id author_id %}" {% endblock action %} method="post">
          {% csrf_token %}
          <div class="modal-body">
            <div class="form-row">
              <div class="form-group col-md-6">
                <label>First name</label> {{ aform.first_name }}
              </div>
              <div class="form-group col-md-6">
                <label>Last name</label> {{ aform.last_name }}
              </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                  <label>Email</label> {{ aform.email }}
                </div>
            </div> 
            <button type="submit" class="btn btn-primary">Save changes</button>
            <ul class='errorList'>
              {% for field in aform %}
                  {% if field.errors %}
                      {% for error in field.errors %}
                          <li style="color: red;">{{ error }}</li>
                      {% endfor %}
                  {% endif %}
              {% endfor %}
            </ul>
          </div>
        </form>      
      </div>
    </div>
  </div>
  
  <script>
    $(document).ready(function() {
      $('#edit_author_modal').modal('show');
      $('#edit_author_modal').on('click', function(event) {
        if ($(event.target).is('#edit_author_modal')) {
          redirectToSubmitPaper();
        }
      });
    });
  
    function redirectToSubmitPaper() {
      window.location.href = "{% url 'submit_paper' conference_id paper.id %}";
    }
  </script>
   {% endcomment %}