{% extends 'base.html' %}

{% block content %}
  {% include 'includes/alerts.html' %}

{% if not display_add_author_model and not display_edit_author_model %}
  {% if paper %}  
    <form action="{% url 'submit_paper' conference_id paper.id %}" method="post" enctype="multipart/form-data">
  {% else %}
    <form action="{% url 'submit_paper' conference_id %}" method="post" enctype="multipart/form-data">
  {% endif %}    
{% endif %}
    {% csrf_token %}

    {% if display_add_author_model %}
      {% include 'conference/add_author.html' %}
    {% endif %}

    {% if display_edit_author_model %}
      {% include 'conference/edit_author.html' %}
    {% endif %}

    <div class="form-row">
        <div class="form-group col-md-6">
            <label>Title</label> {{ form.title }}
        </div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-6">
            <label>Abstract</label> {{ form.abstract }}
        </div>
    </div>
    {% if paper %}
      {% if paper.authors %}
        <p>Authors: </p> 
        {% for author in paper.authors.all %}
          {% comment %} {% if author not  %} {% endcomment %}
            <p> {{ author.first_name }} {{ author.last_name }} <a href="{% url 'edit_author' conference_id paper.id author.id  %}" style="color: unset;"><i class="fas fa-edit"></i></a> &nbsp; <a href="{% url 'delete_author' conference_id paper.id author.id %}" onclick="return confirm('Are you sure you want to delete this author?')"><i class="fa fa-trash text-danger"></i></a></p>
          {% comment %} {% endif %} {% endcomment %}
        {% endfor %}
      {% endif %}
    {% endif %}
    {% comment %} aria-hidden="true"  style="color: unset;" {% endcomment %}
    <button type="submit" name="add_author" class="btn btn-dark">Add Author</button>

    <div class="form-row">
      <div class="form-group col-md-6">
          <label>Add yourself as author</label> {{ form.is_submitter_author }}
      </div>
   </div>

    <div class="form-row">
        <div class="form-group col-md-6">
            <label>File</label>
            {{ form.file }}
        </div>
    </div>
    <button type="submit" name="submit_paper" class="btn btn-dark mb-3">Submit Paper</button>
    <a href="{% url 'conference_listing' %}" class="btn btn-outline-dark mb-3 ms-2" style="width: 75px;"><i class="fas fa-chevron-left"></i> Back</a>
    <button type="reset" class="btn btn-outline-dark mb-3 ms-2" style="width: 50px;"><i class="fas fa-sync-alt"></i></button>
    
    <ul class='errorList'>
        {% for field in form %}
          {% if field.errors %}
            {% for error in field.errors %}
              <li style="color: red;">{{field}}: {{ error }}</li>
            {% endfor %}
          {% endif %}
        {% endfor %}
    </ul>
    
    <li style="color: red;">{{ form.non_field_errors }}</li>
</form>


{% endblock %}